(function(a,b){'use strict';function d(){return k((Math.random()*s<<0).toString(r),c)}function e(){return q=q<s?q:0,q++,q-1}function f(){var a=new Date().getTime().toString(r),b=k(e().toString(r),c),f=p(),g=d()+d();return'c'+a+b+f+g}function g(a){var b=!1;if(null!=a&&'function'!=typeof a.toString)try{b=!!(a+'')}catch(a){}return b}function h(a){return!!a&&'object'==typeof a}var i='undefined'==typeof window?'undefined'==typeof global?'undefined'==typeof self?{}:self:global:window,j=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(a){(function(b){var c=!1;if(!1,a.exports=b(),c=!0,!c){var d=window.Cookies,e=window.Cookies=b();e.noConflict=function(){return window.Cookies=d,e}}})(function(){function a(){for(var a=0,b={};a<arguments.length;a++){var c=arguments[a];for(var d in c)b[d]=c[d]}return b}function b(c){function d(b,e,f){var g;if('undefined'!=typeof document){if(1<arguments.length){if(f=a({path:'/'},d.defaults,f),'number'==typeof f.expires){var h=new Date;h.setMilliseconds(h.getMilliseconds()+864e+5*f.expires),f.expires=h}f.expires=f.expires?f.expires.toUTCString():'';try{g=JSON.stringify(e),/^[\{\[]/.test(g)&&(e=g)}catch(a){}e=c.write?c.write(e,b):encodeURIComponent(e+'').replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),b=encodeURIComponent(b+''),b=b.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),b=b.replace(/[\(\)]/g,escape);var j='';for(var k in f)f[k]&&(j+='; '+k,!0!==f[k])&&(j+='='+f[k]);return document.cookie=b+'='+e+j}b||(g={});for(var l=document.cookie?document.cookie.split('; '):[],m=/(%[0-9A-Z]{2})+/g,n=0;n<l.length;n++){var i=l[n].split('='),o=i.slice(1).join('=');this.json||'"'!==o.charAt(0)||(o=o.slice(1,-1));try{var p=i[0].replace(m,decodeURIComponent);if(o=c.read?c.read(o,p):c(o,p)||o.replace(m,decodeURIComponent),this.json)try{o=JSON.parse(o)}catch(a){}if(b===p){g=o;break}b||(g[p]=o)}catch(a){}}return g}}return d.set=d,d.get=function(a){return d.call(d,a)},d.getJSON=function(){return d.apply({json:!0},[].slice.call(arguments))},d.defaults={},d.remove=function(b,c){d(b,'',a(c,{expires:-1}))},d.withConverter=b,d}return b(function(){})})});(function(a){function b(a){a=a||'',(a instanceof URLSearchParams||a instanceof b)&&(a=a.toString()),this[j]=f(a)}function c(a){var b={"!":'%21',"'":'%27',"(":'%28',")":'%29',"~":'%7E',"%20":'+',"%00":'\0'};return encodeURIComponent(a).replace(/[!'\(\)~]|%20|%00/g,function(a){return b[a]})}function d(a){return decodeURIComponent(a.replace(/\+/g,' '))}function e(b){var c={next:function(){var a=b.shift();return{done:void 0===a,value:a}}};return l&&(c[a.Symbol.iterator]=function(){return c}),c}function f(a){var b={};if('object'==typeof a){for(var c in a)if(a.hasOwnProperty(c)){var e='string'==typeof a[c]?a[c]:JSON.stringify(a[c]);g(b,c,e)}}else{0===a.indexOf('?')&&(a=a.slice(1));for(var f=a.split('&'),h=0;h<f.length;h++){var i=f[h],j=i.indexOf('=');-1<j?g(b,d(i.slice(0,j)),d(i.slice(j+1))):i&&g(b,d(i),'')}}return b}function g(a,b,c){b in a?a[b].push(''+c):a[b]=[''+c]}var h=a.URLSearchParams?a.URLSearchParams:null,i=h&&'a=1'===new h({a:1}).toString(),j='__URLSearchParams__',k=b.prototype,l=!!(a.Symbol&&a.Symbol.iterator);if(!(h&&i)){k.append=function(a,b){g(this[j],a,b)},k.delete=function(a){delete this[j][a]},k.get=function(a){var b=this[j];return a in b?b[a][0]:null},k.getAll=function(a){var b=this[j];return a in b?b[a].slice(0):[]},k.has=function(a){return a in this[j]},k.set=function(a,b){this[j][a]=[''+b]},k.toString=function(){var a,b,d,e,f=this[j],g=[];for(b in f)for(d=c(b),a=0,e=f[b];a<e.length;a++)g.push(d+'='+c(e[a]));return g.join('&')},a.URLSearchParams=h&&!i?new Proxy(h,{construct:function(a,c){return new a(new b(c[0]).toString())}}):b;var m=a.URLSearchParams.prototype;m.polyfill=!0,m.forEach=m.forEach||function(a,b){var c=f(this.toString());Object.getOwnPropertyNames(c).forEach(function(d){c[d].forEach(function(c){a.call(b,c,d,this)},this)},this)},m.sort=m.sort||function(){var a,b,c,d=f(this.toString()),e=[];for(a in d)e.push(a);for(e.sort(),b=0;b<e.length;b++)this.delete(e[b]);for(b=0;b<e.length;b++){var g=e[b],h=d[g];for(c=0;c<h.length;c++)this.append(g,h[c])}},m.keys=m.keys||function(){var a=[];return this.forEach(function(b,c){a.push([c])}),e(a)},m.values=m.values||function(){var a=[];return this.forEach(function(b){a.push([b])}),e(a)},m.entries=m.entries||function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),e(a)},l&&(m[a.Symbol.iterator]=m[a.Symbol.iterator]||m.entries)}})('undefined'==typeof i?'undefined'==typeof window?i:window:i);var k=function(a,b){var c='000000000'+a;return c.substr(c.length-b)},l='object'==typeof window?window:self,m=Object.keys(l).length,n=navigator.mimeTypes?navigator.mimeTypes.length:0,o=k((n+navigator.userAgent.length).toString(36)+m.toString(36),4),p=function(){return o},q=0,c=4,r=36,s=1679616;f.slug=function(){var a=new Date().getTime().toString(36),b=e().toString(36).slice(-4),c=p().slice(0,1)+p().slice(-1),f=d().slice(-2);return a.slice(-2)+b+c+f},f.fingerprint=p;var t=Function.prototype,u=Object.prototype,v=t.toString,w=u.hasOwnProperty,x=v.call(Object),y=u.toString,z=function(a,b){return function(c){return a(b(c))}}(Object.getPrototypeOf,Object),A=function(a){if(!h(a)||y.call(a)!='[object Object]'||g(a))return!1;var b=z(a);if(null===b)return!0;var c=w.call(b,'constructor')&&b.constructor;return'function'==typeof c&&c instanceof c&&v.call(c)==x};(function(a,b){var c={log:function(b,c){d.isDev&&a.console.log('Reelevant:',b,c||'')},error:function(b,c){d.isDev&&a.console.error('Reelevant error:',b,c||'')}};if(!a.reel._key)return c.error('Missing key');Object.assign(a.reel,{initTmp:function(){var a='rlvt_tmpId';j.get(a)?this.tmpId=j.get(a):(this.tmpId=f(),j.set(a,this.tmpId,{expires:30}))},initId:function(){var a='rlvt_id',c=new URLSearchParams(b.location.search);this.id=c.get(a)||j.get(a),this.clientId=j.get('rlvt_clientId'),this.id&&j.set(a,this.id,{expires:30})},initB:function(){var a='rlvt_b',c=new URLSearchParams(b.location.search),d=j.get(a),e=c.get(a);this.b=e||d,this.b&&e&&j.set(a,this.b,{expires:30})},storeClientId:function(a){a&&(this.clientId=a+'',j.set('rlvt_clientId',this.clientId,{expires:30}))},buildEvent:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},c=a.name,d=c===void 0?'':c,e=a.data,f=e===void 0?{}:e,g=f;try{g=JSON.parse(JSON.stringify(g))}catch(a){return{}}var h={key:this._key,name:d,url:b.location.href,id:this.id,b:this.b,tmpId:this.tmpId,clientId:this.clientId,data:g,v:1};return h},processRunQueue:function(){if(this._runQueue){var a=this._runQueue.shift();if(!a)return;this.event(a.name,a.data)}setTimeout(function(){return d.processRunQueue()},1)},createCORSRequest:function(a,b){var c=new XMLHttpRequest;return'withCredentials'in c?c.open(a,b,!0):'undefined'==typeof XDomainRequest?c=null:(c=new XDomainRequest,c.open(a,b)),c},isCorrectEvent:function(a){return a.name&&'string'==typeof a.name&&!!A(a.data)&&!!(a&&a.key&&a.url&&a.tmpId&&a.v)},sendEvent:function(a){if(!this.isCorrectEvent(a))return c.error('Invalid event',a);var d='https:'===b.location.protocol?'https://':'http://',e=this.createCORSRequest('POST',''+d+'us-central1-reelevant-1366.cloudfunctions.net/tracker');e&&(e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status?c.log('ok - '+e.status+' '+e.statusText):c.error('Bad HTTP status - '+e.status+' '+e.statusText)},e.send(JSON.stringify(a)))},event:function(a,b){var c=b;'identify'===a&&(this.storeClientId(b),c={});var e=this.buildEvent({name:a,data:c});this.sendEvent(e)},identify:function(a){this.event('identify',a)},init:function(){this.initTmp(),this.initId(),this.initB(),this.processRunQueue()},version:'1.3.2'});var d=a.reel;d.init()})(a,b)})(window,document);
//# sourceMappingURL=reelevant.js.map
